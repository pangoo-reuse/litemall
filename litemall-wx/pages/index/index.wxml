<!--index.wxml-->
<view class="container">
	<view class="search">
		<navigator url="/pages/search/search" class="input">
			<van-icon name="search" />
			<text class="txt">商品搜索, 共{{goodsCount}}款好物</text>
		</navigator>
	</view>
	<swiper class="banner" indicator-dots="true" autoplay="true" interval="3000" duration="1000">
		<swiper-item wx:for="{{banner}}" wx:key="id">
			<block wx:if="{{item.link > 0}}">
				<navigator url="/pages/goods/goods?id={{item.link}}">
					<image src="{{item.url}}" background-size="cover"></image>
				</navigator>
			</block>
			<block wx:else>
				<image src="{{item.url}}" background-size="cover"></image>
			</block>
		</swiper-item>
	</swiper>
	<view class="m-menu">

		<navigator class="item" url="/pages/category/category?id={{item.id}}" wx:for="{{channel}}" wx:key="id">
			<image src="{{item.iconUrl}}" background-size="cover"></image>
			<text>{{item.name}}</text>
		</navigator>

	</view>

	<view class="a-section a-coupon" wx:if="{{coupon.length > 0}}">

		<navigator url="/pages/coupon/coupon">
			<custom-flex main='between' cross='center'>
				<text class="placeholder">优</text>
				<text class="title">优惠券</text>
				<view class="more">
					<van-icon name="arrow" color='gray' />
				</view>
			</custom-flex>
		</navigator>

		<view wx:if="{{coupon.length>0}}" class="b">
			<view class="item" wx:for="{{coupon}}" wx:for-index="index" wx:for-item="item" wx:key="id" bindtap="getCoupon" data-index="{{item.id}}">
				<view class="tag">{{item.tag}}</view>
				<view class="content">
					<view class="left">
						<view class="discount">{{item.discount}}元</view>
						<view class="min"> 满{{item.min}}元使用</view>
					</view>
					<view class="right">
						<view class="name">{{item.name}}</view>
						<view class="desc">{{item.desc}}</view>
						<view class="time" wx:if="{{item.days != 0}}">有效期：{{item.days}}天</view>
						<view class="time" wx:else> 有效期：{{item.startTime}} - {{item.endTime}}</view>
					</view>
				</view>
			</view>
		</view>
	</view>

	<view class="a-section a-groupon" wx:if="{{p2pList.length > 0}}">

		<navigator url="/pages/groupon/grouponList/grouponList">
			<custom-flex main='between' cross='center'>
				<text class="placeholder">闪购</text>
				<text class="title">闪购专区</text>
				<view class="more">
					<van-icon name="arrow" color='gray' />
				</view>
			</custom-flex>
		</navigator>
		<view class="b">
			<view class="item" wx:for="{{p2pList}}" wx:for-index="index" wx:for-item="item" wx:key="id">
				<navigator url="/pages/goods/goods?id={{item.goodsId}}&ruleId={{item.id}}">
					<custom-flex main="around" cross="center">
						<view>
							<image class="img" lazy-load fit="contain" src="{{item.picUrl}}" />
							<text class="tag">闪</text>
						</view>
						<van-col>
							<van-row>
								<text class="name">{{item.goodsName}}</text>
							</van-row>
							<van-row>
								<text class="desc">{{item.brief}}</text>
							</van-row>
							<van-row>
								<view class="retailPrice">闪购价 ￥{{item.price}}</view>

							</van-row>
							<van-row>
								<custom-flex cross="center" main='between'>
									<van-tag size='medium' text-color type="warning">
										<van-count-down time="{{ item.time }}" format="DD天HH时mm分ss秒" />
									</van-tag>
									<text class="ava">已售:{{item.saleCount}}</text>
								</custom-flex>

							</van-row>
						</van-col>
					</custom-flex>
				</navigator>
			</view>
		</view>
	</view>


	<view class="a-section a-new" wx:if="{{newGoods.length > 0}}">

		<navigator url="../newGoods/newGoods">
			<custom-flex main='between' cross='center'>
				<text class="placeholder">新</text>
				<text class="title">新品首发</text>
				<view class="more">
					<van-icon name="arrow" color='gray' />
				</view>
			</custom-flex>
		</navigator>

		<view class="b">
			<view class="item" wx:for="{{newGoods}}" wx:for-index="index" wx:for-item="item" wx:key="id">
				<navigator url="../goods/goods?id={{item.id}}">

					<image class="img" src="{{item.picUrl}}" background-size="cover"></image>
					<text class="name">{{item.name}}</text>
					<text class="price">￥{{item.retailPrice}}</text>
				</navigator>
			</view>
		</view>
	</view>

	<view class="a-section a-popular" wx:if="{{hotGoods.length > 0}}">

		<navigator url="../hotGoods/hotGoods">
			<custom-flex main='between' cross='center'>
				<text class="placeholder">人</text>
				<text class="title">人气推荐</text>
				<view class="more">
					<van-icon name="arrow" color='gray' />
				</view>
			</custom-flex>
		</navigator>

		<view class="b">
			<view class="item" wx:for="{{hotGoods}}" wx:for-index="index" wx:for-item="item" wx:key="id">
				<navigator url="/pages/goods/goods?id={{item.id}}">
					<image class="img" src="{{item.picUrl}}" background-size="cover"></image>
					<view class="right">
						<view class="text">
							<text class="name">{{item.name}}</text>
							<text class="desc">{{item.brief}}</text>
							<text class="price">￥{{item.retailPrice}}</text>
						</view>
					</view>
				</navigator>
			</view>
		</view>
	</view>

	<view class="a-section a-topic" wx:if="topics.length > 0" hidden="{{topics.length <= 0}}">

		<navigator url="/pages/topic/topic">
			<custom-flex main='between' cross='center'>
				<text class="placeholder">专</text>
				<text class="title">专题精选</text>
				<view class="more">
					<van-icon name="arrow" color='gray' />
				</view>
			</custom-flex>
		</navigator>
		<view class="b">
			<scroll-view scroll-x class="list">
				<view class="item" wx:for="{{topics}}" wx:for-index="index" wx:for-item="item" wx:key="id">
					<navigator url="../topicDetail/topicDetail?id={{item.id}}">
						<image class="img" src="{{item.picUrl}}" background-size="cover"></image>
						<view class="np">
							<text class="name">{{item.title}}</text>
							<text class="price">￥{{item.price}}元起</text>
						</view>
						<text class="desc">{{item.subtitle}}</text>
					</navigator>
				</view>
			</scroll-view>
		</view>
	</view>
	<view class="good-grid" wx:for="{{floorGoods}}" wx:key="id">
		<view class="h">
			<text>{{item.name}}</text>
		</view>
		<view class="b">
			<block wx:for="{{item.goodsList}}" wx:for-index="iindex" wx:for-item="iitem" wx:key="id">
				<view class="item {{iindex % 2 == 0 ? '' : 'item-b'}}">
					<navigator url="../goods/goods?id={{iitem.id}}" class="a">
						<image class="img" src="{{iitem.picUrl}}" background-size="cover"></image>
						<text class="name">{{iitem.name}}</text>
						<text class="price">￥{{iitem.retailPrice}}</text>
					</navigator>
				</view>
			</block>
		</view>
		<navigator url="/pages/category/category?id={{item.id}}" class="t">
			<view class="txt">{{'更多'+item.name+'好物 >'}}</view>
		</navigator>
	</view>
	<view class="a-section a-brand">
		<view class="h">
			<navigator url="../brand/brand">
				<text class="txt">品牌制造商直供</text>
			</navigator>
		</view>
		<view class="b">
			<view class="item item-1" wx:for="{{brands}}" wx:key="id">
				<navigator url="/pages/brandDetail/brandDetail?id={{item.id}}">
					<view class="wrap">
						<image class="img" src="{{item.picUrl}}" mode="aspectFill"></image>
						<view class="mt">
							<text class="brand">{{item.name}}</text>
							<text class="price">{{item.floorPrice}}</text>
							<text class="unit">元起</text>
						</view>
					</view>
				</navigator>
			</view>
		</view>
	</view>
</view>